(()=>{var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var o=e.g.document;if(!t&&o&&(o.currentScript&&(t=o.currentScript.src),!t)){var n=o.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t+"../../"})(),Object.assign(Element.prototype,{jwAddClass:function(e){this.classList?this.classList.add(e):this.className+=" "+e},jwRemoveClass:function(e){this.classList?this.classList.remove(e):this.className=this.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},jwToggleClass:function(e){if(this.classList)this.classList.toggle(e);else{var t=this.className.split(" "),o=t.indexOf(e);o>=0?t.splice(o,1):t.push(e),this.className=t.join(" ")}},jwHasClass:function(e){return this.classList?this.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(this.className)},jwOn:function(e,t,o){this.addEventListener(e,t,o||!1)}}),(()=>{"use strict";function e(e,t){var o,n,a=document.createElement("script");function i(e,t,o,a,i){n.open(o,e,i),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&t(n.responseText)},n.onerror=function(){console.error(this.statusText)},"POST"===o&&this.XHR.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(a)}if(!e.url)throw"No URL was specified";!function(e,t){var r=e.async||!0,s=function(e){var t=[];if(e)for(var o=0;o<Object.keys(e).length;o++)key=Object.keys(e)[o],t.push(encodeURIComponent(key)+"="+encodeURIComponent(e[key]));return t.join("&")}(e.data),l=e.url;switch(n=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;var e,t,o=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=o.length;for(t=0;t<n;t++)try{e=new ActiveXObject(o[t]);break}catch(e){}return e}(),e.hasOwnProperty("xhrFields")&&e.xhrFields.hasOwnProperty("withCredentials")&&(n.withCredentials=!0),e.type){case"POST":i(l,t,"POST",s,r);break;case"JSON":i(l,t,"GET",s,r);break;case"JSONP":!function(e,t){o="callbackfunction"+Math.round(1e5*Math.random()),e+=(-1!==e.indexOf("?")?"&":"?")+"callback="+o,window[o]=function(e){return function(t){var n,i=!1;delete window[o];try{document.body.removeChild(a)}catch(e){document.head.removeChild(a)}if("string"==typeof t)try{n=i=JSON.parse(console.log(i))}catch(e){}else i=JSON.parse(JSON.stringify(t)),n=t;if(!i)throw"JSONP call returned invalid or empty JSON";e(n)}}(t),a.type="text/javascript",a.async=!0,a.src=e,document.body?document.body.appendChild(a):document.head.appendChild(a)}(l,t);break;default:i(l+"?"+s,t,"GET",null,r)}}(e,t)}window.JAWS||(window.JAWS={}),window.console||(window.console={log:function(){},warn:function(){},error:function(){}}),function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}(),window.JAWS.Localization=function(){var t,o,n,a,i,r,s,l,c,d,u,f,m,p="Auto-localization overlay",y=!1,v=!1,w=!1,h=document.querySelector("#pbs-modal-overlay"),g=document.querySelector("#pbs-confirm-modal-overlay"),S=document.querySelector("#pbs-find-stations"),b=document.querySelector("#pbs-confirm-station"),C=document.querySelector("#pbs-stations-list"),E=!1,A={},_=document.querySelector("body"),L="//jaws.pbs.org/localization/",k={},j={},q=function(){var e=document.querySelectorAll(".pbs_loc_name").length>0&&document.querySelectorAll(".pbs_loc_name")||document.querySelectorAll(".localize").length>0&&document.querySelectorAll(".localize"),t=e&&e[0].getAttribute("data-logo-color");if(t&&"white"===t)return"white";return"color"}();function z(e){e&&e.setAttribute("style","display:none;")}function O(e,t){e&&e.setAttribute("style",`display:${t||"flex"};`)}function x(e,t,o){var n,a,i="",r=".pbs.org";o&&((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),i="; expires="+n.toGMTString()),""!==window.location.hostname&&(r=(a=window.location.hostname).substring(a.lastIndexOf(".",a.lastIndexOf(".")-1)));document.cookie=e+"="+t+i+"; SameSite=None; Secure; path=/; domain="+r}function N(e){var t,o,n=e+"=",a=document.cookie.split(";");for(t=0;t<a.length;t+=1){for(o=a[t];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}function R(e){x("pbsol.common.name.short",e.common_name_short,356),x("pbsol.common.name",e.common_name,356),x("pbsol.station",e.station,356),x("pbsol.station_id",e.station_id,356),e.logo&&x("pbsol.station_logo",e.logo,356)}function I(e){var t=document.querySelector(".donate-btn");t&&e&&(t.href=e)}function T(e,t,o){var n,a=document.querySelectorAll(".pbs_loc_name");for(var i of a)i&&(n=i.querySelector("img")),n||(n=document.createElement("img")),n.srcset=o+"?resize=200x&format=png 1x,"+o+"?resize=400x&format=png 2x",n.src=o+"?resize=200x&format=png",n.alt=e,i&&(i.appendChild(n),i.href=t,i.jwAddClass("localize"))}function M(t){var o=document.querySelector(".modalStationImage"),n=document.querySelector(".regionalDefaultStation");new e({url:L+"false/?callsign="+t,type:"JSONP"},(function(e){o.innerHTML='<img src="'+e.station.logo_url+'"?resize=400x&format=png" alt="'+e.station.common_name+'">',n&&e.station.common_name&&(n.innerHTML=e.station.common_name)}))}function P(e,t){return e&&(t(e)?e:P(e.parentNode,t))}function H(e){var t,o,n=document.querySelectorAll("#autoStationsList .stationItem"),a=e.target;Array.prototype.forEach.call(n,(function(e){e.jwRemoveClass("active"),e.setAttribute("aria-pressed","false")})),t=(o=P(a,(function(e){return"button"===e.tagName.toLowerCase()}))).id,o.jwAddClass("active"),o.setAttribute("aria-pressed","true"),o.getAttribute("data-common_name"),M(t)}function J(e){var t=document.querySelectorAll(".localizationStationListNoStations"),o=document.querySelectorAll(".localizationStationList");e?e&&(Array.prototype.forEach.call(t,(function(e){e.jwAddClass("none")})),Array.prototype.forEach.call(o,(function(e){e.jwRemoveClass("none")}))):(Array.prototype.forEach.call(t,(function(e){e.jwRemoveClass("none")})),Array.prototype.forEach.call(o,(function(e){e.jwAddClass("none")})))}function B(e){var t,o,n=e[0],a="",i=Object.keys(e).length,s=document.querySelector("#autoSelectStation"),l=document.querySelector("#autoStationsList");for(J(!0),0===i&&(J(!1),trackEvent(p,"No Stations for Zip","viewed step")),n&&n.flagship&&(M(n.flagship),v||"forced"!==r||(R({common_name:n.common_name,common_name_short:n.common_name_short,station:n.flagship,station_id:n.id,zipCode:n.zip_code,logo:n.color_single_brand_logo||n.color_cobranded_logo||n.color_logo}),v=!0)),o=0;o<e.length;o+=1)a+='<button id="'+e[o].flagship+'" class="stationItem'+(0===o?" active":"")+'" data-donate_url="'+e[o].membership_url+'" data-common_name="'+e[o].common_name+'" data-zipcode="'+e[o].zip_code+'" aria-pressed="'+(0===o?"true":"false")+'">',a+='<h3><strong class="commonName">'+e[o].common_name+"</strong></h3>",a+="<span>"+e[o].address+"</span>",a+="</button>";l.innerHTML=a,s.jwRemoveClass("none"),t=l.querySelectorAll(".stationItem"),Array.prototype.forEach.call(t,(function(e){e.addEventListener("click",H)}))}function D(e){var t,o,n,a=document.querySelector("#autoStationsList .stationItem.active");switch(h=document.querySelector("#pbs-modal-overlay"),g=document.querySelector("#pbs-confirm-modal-overlay"),S=document.querySelector("#pbs-find-stations"),b=document.querySelector("#pbs-confirm-station"),C=document.querySelector("#pbs-stations-list"),e){case"list":S.jwAddClass("none"),z(S),b.jwAddClass("none"),z(b),C.jwRemoveClass("none"),O(C),h.jwRemoveClass("none"),O(h),g.jwAddClass("none"),z(g),trackEvent(p,"Confirm Station","Viewed Overlay"),C.focus(),window.addEventListener("keyup",Z),C.addEventListener("keydown",F);break;case"find":C.jwAddClass("none"),z(C),b.jwAddClass("none"),z(b),S.jwRemoveClass("none"),O(S),h.jwRemoveClass("none"),O(h),g.jwAddClass("none"),z(g),a&&a.jwRemoveClass("active"),trackEvent(p,"Find Station","viewed step"),S.focus(),C.removeEventListener("keydown",F),window.addEventListener("keyup",Z),S.addEventListener("keydown",(function(e){e.target===S&&F(e)}));break;case"confirm":h.jwAddClass("none"),z(h),g.jwRemoveClass("none"),O(g),b.jwRemoveClass("none"),O(b,"block"),function(){var e=document.querySelector("#pbs-confirm-station");if(!e)return;O(e,"block");var t=e.querySelectorAll(".arrow-box")[0],o=e.querySelectorAll(".before")[0],n=document.querySelectorAll(".pbs_loc_name").length>0&&document.querySelectorAll(".pbs_loc_name")||document.querySelectorAll(".localize").length>0&&document.querySelectorAll(".localize"),a=Array.from(n).find((e=>"none"!==getComputedStyle(e.parentElement.parentElement).display)),i=a.offsetWidth;function r(){var n=a.offsetLeft;o.jwRemoveClass("top-right"),o.jwRemoveClass("top-left"),n+i<document.body.offsetWidth/2?(o.jwAddClass("top-left"),e.style.textAlign="left",t.style.marginLeft=a.offsetLeft-o.offsetLeft+a.offsetWidth/2+"px",t.style.marginRight="0px"):(o.jwAddClass("top-right"),e.style.textAlign="right",t.style.marginLeft="0px",t.style.marginRight=t.offsetParent?t.offsetParent.offsetWidth-a.offsetLeft-a.offsetWidth-(t.offsetWidth-o.offsetLeft-o.offsetWidth)+a.offsetWidth/2+"px":"auto")}a.parentElement.insertBefore(e,a),window.addEventListener("resize",(function(){setTimeout((function(){r()}),800)})),r()}(),_.style.overflow="auto";break;default:C&&(C.jwAddClass("none"),z(C)),S&&(S.jwAddClass("none"),z(S)),b&&(b.jwAddClass("none"),z(b)),(t=document.querySelector("#jaws_localization"))&&t.parentNode.removeChild(t),_.style.overflow="auto",o=_.getAttribute("data-pass-focus-to-on-close"),(n=document.getElementById(o))&&0!==n.offsetHeight||(n=_),n.focus(),_.removeAttribute("data-pass-focus-to-on-close"),window.removeEventListener("keyup",Z)}}function X(e,t,o,n){var a;return window.CustomEvent?a=new CustomEvent(e,{detail:t||{},data:t||{},bubbles:o||!0,cancelable:n||!0}):(document.createEvent?(a=document.createEvent("HTMLEvents")).initEvent(e,o||!0,n||!0):(a=document.createEventObject()).eventType=e,a.eventName=e,a.data=t||{}),a}function W(e){document.createEvent?document.dispatchEvent(e):document.fireEvent("on"+e.eventType,e)}function F(e){var t=e.target,o=t.getAttribute("data-pass-focus-on-tab-to"),n=t.getAttribute("data-pass-focus-on-shift-tab-to");13!==e.keyCode&&32!==e.keyCode?9===e.keyCode&&(e.shiftKey&&n?(e.preventDefault(),document.getElementById(n).focus()):!e.shiftKey&&o&&(e.preventDefault(),document.getElementById(o).focus())):G(e)}function Z(e){27===e.keyCode&&(E?G(e,!0):D())}function G(t,n){var a,i=t.target,s=document.querySelector("#autoStationsList .stationItem.active"),c=Array.prototype.slice.call(document.getElementById("autoStationsList").children);function d(){o?window.location.href=o:i.getAttribute("data-noreload")?D():location.reload()}if(s)new e({url:L+"false/?callsign="+s.getAttribute("id"),type:"JSONP"},(function(e){var u=e.station.skylab_data;if(a={common_name:u.full_common_name,common_name_short:u.short_common_name,donate_url:u.donate_url,station:u.call_sign,station_id:u.id,tvss_url:u.tvss_url,zipCode:u.zip_code},u.images&&u.images.length>0){var f=u.images.find((e=>"color-single-brand-logo"===e.profile)),m=u.images.find((e=>"color-cobranded-logo"===e.profile)),y=u.images.find((e=>"color-logo"===e.profile));a.logo=f&&f.url||m&&m.url||y&&y.url}!function(e){if("closeBtn"===i.getAttribute("class")){if("forced"===r){if(!s)return document.querySelector("#autoStationsList .stationItem")?trackEvent(p,"Find Station","Close"):trackEvent(p,"No Stations for Zip","Close"),t.preventDefault(),d(),!1;trackEvent(p,"Close",s.getAttribute("id")+" - "+parseInt(c.indexOf(s)+1)),t.preventDefault(),d()}"manual"===r&&(s?trackEvent(p,"Close",s.id+" - "+(c.indexOf(s)+1)):document.querySelector("#autoStationsList .stationItem")||0==document.querySelector(".localizationStationListNoStations").offsetHeight?trackEvent(p,"Find Station","Close"):trackEvent(p,"No Stations for Zip","Close"),D()),o&&(window.location.href=o)}if("confirmStation"===i.id||"true"===i.getAttribute("data-confirm-station")||n){if(void 0===t.keyCode&&0==t.detail&&1!=t.pointerId)return;i.getAttribute("data-ga-event")?trackEvent(p,"Is This Your Station",i.getAttribute("data-ga-event")+" - "+w):trackEvent(p,"Confirm",s.id+" - "+parseInt(c.indexOf(s)+1)),R(a),W(X("confirmStationEvent",{link:e.donate_url,zipCode:e.zip_code,confirmBtn:i.getAttribute("id")?"#"+i.getAttribute("id"):"",donate:l,station:e.call_sign})),t.preventDefault(),d()}}(u)}));else"pbs-close-find-station"===i.id?E?(trackEvent(p,"Find Station","Close"),d()):(p="See more Stations – Localization Overlay",trackEvent(p,"Find Station","Close"),D()):E?d():D()}function $(){var t=document.querySelector("#regionSelect"),o=t.value,n=t.parentElement.querySelector(".errorMsg");if(n.jwAddClass("none"),t.jwRemoveClass("invalid"),""===o)return n.jwRemoveClass("none"),t.jwAddClass("invalid"),!1;trackEvent(p,"Find Station","Search by state - "+o),new e({url:L+"member/state/"+o+"/",type:"JSONP"},(function(e){B(e.stations_list),D("list")}))}function U(){var t=document.querySelector("#zipInput").value,o=document.querySelector("#zipInput").parentElement.querySelector(".errorMsg"),n=document.querySelector("#zipInput"),a=/(^\d{5}$)/.test(t);if(o.jwAddClass("none"),n.jwRemoveClass("invalid"),""===t)return o.innerHTML="Please enter a valid ZIP Code",o.jwRemoveClass("none"),n.jwAddClass("invalid"),!1;if(a)trackEvent(p,"Find Station","Search by ZIP - "+t),new e({url:L+"member/zip-code/"+t+"/",type:"JSONP"},(function(e){B(e.stations_list),D("list"),n=t}));else{if(!/^-?\d+$/.test(t))return o.innerHTML="ZIP Code is not numeric",o.jwRemoveClass("none"),n.jwAddClass("invalid"),!1;if(t.toString().length<=4)return o.innerHTML="ZIP Code too short",o.jwRemoveClass("none"),n.jwAddClass("invalid"),!1}}function V(e){var t,o,n,a,i,r,s,l,c;if(""!==k.localization_overlay){if(function(e){var t;if(void 0===e)throw"No html has specified";(t=document.querySelector("#jaws_localization"))||((t=document.createElement("div")).className="pbs-cleanslate",t.id="jaws_localization"),t.innerHTML=e,document.body.insertBefore(t,document.body.firstChild)}(k.localization_overlay),k.stations_list.length>0){B(k.stations_list),s=document.querySelectorAll(".confirmCallsign"),r=k.stations_list[0].common_name,w=k.stations_list[0].callsign;for(var d=0;d<s.length;d++)s[d].innerHTML=r}t=document.querySelectorAll(".closeBtn, .close"),l=document.querySelectorAll(".changeStation"),n=document.querySelectorAll(".showStatesModal"),o=document.querySelectorAll(".modalConfirmStation"),a=document.querySelector("#searchByZip"),i=document.querySelector("#serchByRegion"),c=document.querySelector("#backButton"),Array.prototype.forEach.call(t,(function(e){e.addEventListener("click",G),e.addEventListener("keydown",F)})),Array.prototype.forEach.call(o,(function(e){e.addEventListener("click",G),e.addEventListener("keydown",F)})),Array.prototype.forEach.call(l,(function(e){e.addEventListener("click",(function(e){var t,o=document.querySelectorAll(".errorMsg");document.querySelector("#autoStationsList .active");for(t=0;t<o.length;t+=1)o[t].jwAddClass("none");trackEvent(p,"Is This Your Station","Change - "+w),D("list"),e.preventDefault()}))})),Array.prototype.forEach.call(n,(function(e){e.addEventListener("click",(function(e){trackEvent(p,"More Stations",""),V("find")}))})),a.addEventListener("click",U),i.addEventListener("click",$),c.addEventListener("click",(function(e){D("find"),e.preventDefault()})),_.style.overflow="hidden",D(e)}}function Y(e){var o,n=decodeURIComponent(t).split("#"),a=new RegExp("^"+e+"=","g");return Array.prototype.forEach.call(n,(function(e){if(a.test(e)){var t=e.split("=");o=(o=(o=(o=(o=t[1]).replace("[","")).replace("]","")).replace(/"/g,"")).split(",")}})),o}function K(){t=N("pbsol.sta_extended"),n=N("pbskids.localized"),a=N("pbsol.station"),i=N("pbsol.station_id"),N("pbs.preventOverlays"),t&&(A.extended={zip:Y("z")[0],state:Y("st")[0],stations:Y("s")})}return"undefined"==typeof trackEvent&&(window.trackEvent=function(e,t,o,n){if("undefined"!=typeof GTMDataLayer){n=n||!1;GTMDataLayer.push({event:"GlobalChrome",category:e,action:t,label:o,nonInteraction:n})}}),K(),y||(c=["//jaws-prod.cdn.pbs.org/1.19.1/header/css/localization.css"],d=function(){var o;window.hide_forced_localization||window.skipAutoLocalization||t&&!a&&(o=L+"true/",a?o+="?callsign="+a:A&&A.extended&&(o+="?extended="+JSON.stringify(A)),window.skipAutoLocalization=!0,new e({url:o,type:"JSONP"},(function(t){r="forced";var o=(k=t).stations_list[0].flagship;x("pbs.preventOverlays",1,0),new e({url:L+"false/?callsign="+o+"&profile="+q,type:"JSONP"},(function(e){j=e.station,s=j.zip_code;var t=X("jaws.localized",{station:j});T(j.common_name,j.site_address,j.logo_url),I(j.membership_url),E=!0,V("confirm"),W(t);var o=document.querySelector("#pbs-confirm-station-box");o.focus(),trackEvent(p,"Is This Your Station","Viewed Overlay",!0),o.addEventListener("keydown",(function(e){e.target===o&&F(e)})),window.addEventListener("keyup",Z)}))})))},Array.prototype.forEach.call(c,(function(e){var t="?"+(new Date).getTime();(u=document.createElement("link")).rel="stylesheet",u.type="text/css",u.href=e+t,d&&u.addEventListener("load",d),document.head.appendChild(u)})),y=!0),a&&(A.callsign=a,new e({url:L+"false/?callsign="+a+"&profile="+q,type:"JSONP"},(function(e){var t=e.station.site_address||e.station.stationfinder_url;T(e.station.common_name,t,e.station.logo_url),I(e.station.membership_url),i||x("pbsol.station_id",e.station.skylab_data.id,356)}))),a&&a!==n&&(f=a,(m=document.createElement("iframe")).src="//pbskids.org/localization/p.gif?pbs.station="+f,m.style.display="none",document.body.appendChild(m),x("pbskids.localized",a,30)),z(g),z(S),z(b),z(C),{init:function(n,i){o=i||null,l=n=n||"",p="See more Stations – Localization Overlay";var c=L+"true/";K(),a&&(A&&A.extended?c+="?extended="+JSON.stringify(A):c+="?callsign="+a),["Donate","TVSchedules","PassportVideos"].indexOf(n)>-1&&(c+=(a?"&":"?")+"popup_location="+n),new e({url:c,type:"JSONP"},(function(e){k=e,r="manual",s=e.zip||s,V(t&&!n?"list":"find")}))}}}(),window.GlobalChrome||(window.GlobalChrome={Localization:{Init:function(){window.JAWS.Localization.init()}}})})(),(()=>{"use strict";e.p})()})();